### **유저 시나리오**
[유저 스토리]

- 사용자(회원)는 상품 목록과 상세 정보를 조회할 수 있다.
- 사용자는 브랜드 정보를 조회할 수 있다.
- 사용자는 상품을 좋아요(찜)할 수 있으며, 이미 찜한 상품을 다시 누르면 찜이 취소된다.
- 사용자는 주문을 생성하고 결제를 진행할 수 있다(재고 차감, 포인트 차감, 외부 시스템 연동 포함).

[기능 흐름]

상품 및 브랜드 조회

1. 사용자(회원/비회원)는 상품 목록을 검색하거나 필터링하여 조회한다.
2. 상품 상세 페이지에서 상품의 상세 정보를 확인한다.
3. 브랜드 목록을 조회하거나 특정 브랜드의 상세 정보를 확인한다.

상품 좋아요 등록/취소 (멱등 동작)

1. 로그인 사용자만 가능하며, 찜 버튼 클릭 시 서버에서 찜 존재 여부를 판단한다.
2. 찜 목록에 없다면 저장하여 찜한다.
3. 이미 찜 목록에 있으면 삭제하여 찜을 취소한다.
4. 실시간으로 상품의 좋아요(찜) 수를 반영한다.

주문 생성 및 결제

1. 사용자(회원)는 상품을 선택해 주문을 생성한다.
2. 결제 과정에서 포인트 차감, 외부 결제 시스템 연동이 이루어진다.
3. 결제 성공 시 재고를 차감한다.
4. 결제 실패 시 재고 복원 및 관련 처리한다.
5. 주문 상태, 결제 상태는 외부 시스템과 연동한다.

---

### **요구사항 명세서: E-Commerce 플랫폼**

**1. 시스템 액터 (System Actors)**

*   **사용자 (User)**: 시스템과 상호작용하는 모든 사람을 지칭하며, 회원과 비회원으로 나뉩니다.
    *   **회원 (Member)**: 계정이 있어 로그인이 가능한 사용자. 주문, 결제, 좋아요 등 모든 기능을 사용할 수 있습니다.
    *   **비회원 (Non-member)**: 계정이 없는 사용자. 상품 및 브랜드 조회 등 일부 기능만 사용할 수 있습니다.

**2. 시스템 개요**
*   **본 문서는 사용자가 상품을 조회하고, '좋아요'를 누르며, 주문과 결제를 진행할 수 있는 E-Commerce 플랫폼을 구축하기 위한 요구사항을 정의합니다. 이 시스템은 사용자가 상품 및 브랜드 정보를 탐색하고, 원하는 상품을 찜(좋아요)하며, 보유한 포인트를 사용하여 주문 및 결제를 완료하는 핵심 기능을 제공하는 것을 목표로 합니다.**

**3. 기능 요구사항 (Functional Requirements)**

**3.1. 사용자 및 인증**
*   **FR-1 (회원 접근)**: 회원은 시스템에 로그인하여 모든 기능을 이용할 수 있다.
    *   로그인한 회원의 요청에는 `X-USER-ID` 헤더에 사용자 식별 정보가 포함되어야 한다.
*   **FR-2 (비회원 접근)**: 비회원은 별도의 로그인 없이 상품 및 브랜드 정보를 조회할 수 있다.

**3.2. 상품 및 브랜드**
*   **FR-3 (상품 목록 조회)**: 모든 사용자는 상품 목록을 조회할 수 있다.
    *   상품 검색 기능 (상품명, 브랜드명 등)을 제공해야 한다.
    *   신상품순, 좋아요순, 가격순 등 다양한 조건으로 필터링 및 정렬이 가능해야 한다.
*   **FR-4 (상품 상세 조회)**: 모든 사용자는 특정 상품을 선택하여 상세 정보를 조회할 수 있다.
    *   상세 정보에는 상품명, 설명, 가격, 이미지, 현재까지의 총 좋아요 수가 포함되어야 한다.
*   **FR-5 (브랜드 목록 조회)**: 모든 사용자는 입점된 브랜드의 목록을 조회할 수 있다.
*   **FR-6 (브랜드 상세 조회)**: 모든 사용자는 특정 브랜드를 선택하여 브랜드 정보와 해당 브랜드의 상품 목록을 조회할 수 있다.

**3.3. 상품 좋아요**
*   **FR-7 (좋아요 추가/취소)**: **로그인한 회원**만 상품에 대한 '좋아요'를 추가하거나 취소할 수 있으며, 각 기능은 **멱등성**을 보장해야 한다.
    *   비 로그인 상태로 요청하는 경우 `NOT_FOUND` 를 응답한다.  
    * 로그인한 회원의 요청에는 `X-USER-ID` 헤더에 사용자 식별 정보가 포함되어야 한다.
    *   **좋아요 추가**: `POST` 요청을 사용하며, 반복 호출 시에도 '좋아요' 상태가 유지된다.
    *   **좋아요 취소**: `DELETE` 요청을 사용하며, 반복 호출 시에도 '좋아요가 아닌' 상태가 유지된다.
*   **FR-8 (좋아요 수 반영)**: 좋아요 추가/취소 시, 해당 상품의 총 좋아요 수가 반영되어 사용자에게 보여야 한다.
*   **FR-9 (좋아요 목록 조회)**: 회원은 '마이페이지' 등에서 자신이 좋아요한 상품 목록을 확인할 수 있다.

**3.4. 주문 및 결제**
*   **FR-10 (주문 생성)**: **로그인한 회원**만 하나 이상의 상품을 선택하여 주문을 생성할 수 있다.
    *   비 로그인 상태로 요청하는 경우 `NOT_FOUND` 를 응답한다.
*   **FR-11 (결제 처리)**: 주문 생성 후 결제를 진행한다.
    *   회원이 보유한 포인트를 사용하여 결제 금액의 일부 또는 전체를 차감할 수 있다.
    *   외부 결제 시스템과 연동하여 결제를 지원해야 한다.(본 명세서의 범위에서는 결제금액을 포인트 차감으로 대체한다.)
*   **FR-12 (재고 관리)**: 결제와 재고는 트랜잭션으로 관리되어야 한다.
    *   결제가 **성공**하면, 주문된 상품의 재고를 즉시 차감한다.
    *   결제가 **실패**하거나 **취소**되면, 차감 시도했던 재고를 원래대로 복원해야 한다.
*   **FR-13 (상태 관리)**: 주문 및 결제 상태는 외부 시스템과의 연동 결과를 포함하여 정확하게 관리되어야 한다.
    *   상태 종류: (`결제 완료`, `주문 취소`)
*   **FR-14 (주문 내역 조회)**: 회원은 자신의 주문 내역과 현재 상태를 확인할 수 있다.

**4. 비기능 요구사항 (Non-Functional Requirements)**

*   **NFR-1 (성능)**:
    *   상품 목록 및 상세 페이지는 2초 이내에 응답해야 한다.
    *   결제 및 재고 차감 프로세스는 3초 이내에 완료되어야 한다.
*   **NFR-2 (데이터 일관성)**:
    *   재고, 포인트, 주문 상태 등 민감한 데이터는 어떠한 경우에도 불일치가 발생하지 않도록 강력한 일관성을 유지해야 한다.
*   **NFR-3 (멱등성)**:
    *   사용자가 네트워크 오류 등으로 결제 요청이나 좋아요 요청을 여러 번 보내더라도, 시스템은 이를 한 번의 요청으로 처리해야 한다.