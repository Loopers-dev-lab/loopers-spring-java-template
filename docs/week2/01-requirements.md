# e-commerce 요구사항 정리

## 1. 유저 시나리오 및 연관 기능적 요구사항 정의
- 유저 시나리오를 도출하고, 연관 키워드 및 핵심 기능을 추출합니다.
  - 주요 키워드에 대해 핵심 요구사항으로 범주화하고 세부적인 요구사항 명세를 작성합니다.
- 유저시나리오에 대한 주요 예외상황을 기술합니다.
- 액터가 유저인 경우 먼저 로그인을 했다고 가정합니다.

| 번호 | **유저 시나리오**                                                           | **연관 키워드**                 | **핵심 기능**              | **주요 예외상황**                                                                                       |
|----|-----------------------------------------------------------------------|----------------------------|------------------------|---------------------------------------------------------------------------------------------------|
| 1  | 유저는 이커머스에 입점한 여러 브랜드들의 상품을 둘러보고<br>마음에 드는 상품을 좋아요 누를 수 있다.            | 유저, 브랜드, 상품, 좋아요           | 상품 좋아요 등록              | 이미 좋아요한 상품, 상품 삭제됨, 상품 판매종료됨                                                                      |
| 2  | 유저는 이커머스에 입점한 여러 브랜드들의 상품을 둘러보고<br>‘좋아요’ 누른 상품을 ‘좋아요’ 취소할 수 있다.       | 유저, 브랜드, 상품, 좋아요           | 상품 좋아요 취소              | 좋아요 취소했지만 화면에서 아직 좋아요 상태로 보임                                                                      |
| 3  | 유저는 여러 브랜드 상품을 둘러보고<br>마음에 드는 상품을 한 번에 담아 바로 주문할 수 있다.                | 유저, 브랜드, 상품, 주문            | 상품 목록 조회, 단건 주문, 다건 주문 | 품절(주문 전 재고부족), 주문 중 재고부족, 결제 실패, 다건 주문 중 일부 주문건에 대한 앞선 이유로 인한 주문 실패                               |
| 4  | 유저는 자신의 관심 상품 목록을 조회하고<br>그 상품을 한 번에 담아 바로 주문할 수 있다.                  | 유저, 좋아요 목록 조회, 브랜드, 상품, 주문 | 좋아요 목록 조회, 단건 주문, 다건 주문 | 관심 상품 목록 0건, 관심 상품에 대한 상품 정보 변경(삭제, 판매종료)                                                         |
| 5  | 유저는 원하는 브랜드 또는 인기 있는 브랜드 정보를 확인하기 위해<br>입점한 여러 브랜드 목록을 조회할 수 있다.      | 유저, 브랜드 정보, 좋아요            | 브랜드 정보 조회              | 브랜드 입점 해지                                                                                         |
| 6  | 유저는 관심 상품을 찾기 위해<br>여러 브랜드 상품을<br>기본/최근등록/가격/좋아요 순으로 조회할 수 있다.        | 유저, 브랜드, 상품, 좋아요           | 상품 목록 조회               | 필터 없는 경우, 정렬기준에 대한 ROWNUM 중복                                                                      |
| 7  | 유저는 관심 상품을 찾기 위해<br>특정 브랜드의 다양한 상품을<br>기본/최근등록/가격/좋아요 순으로 조회할 수 있다.   | 유저, 브랜드, 상품, 좋아요           | 상품 목록 조회               | 필터 없는 경우, 정렬기준에 대한 ROWNUM 중복                                                                      |
| 8  | 유저는 특정 상품의 세부 정보를 보기 위해<br>특정 브랜드의 특정 상품 상세 페이지를 조회할 수 있다.            | 유저, 상품                     | 상품 정보 조회               | 브랜드 입점해지, 상품 삭제됨, 상품 판매종료                                                                         |
| 9  | 유저는 인기 있는 상품을 찾기 위해<br>이커머스에 입점한 여러 브랜드 상품을<br>좋아요 오름차순/내림차순으로 조회할 수 있다. | 유저, 브랜드, 상품, 좋아요           | 상품 목록 조회               | 정렬기준에 대한 ROWNUM 중복                                                                                |
| 10 | 시스템은 상품 판매 매출을 늘리기 위해<br>인기 브랜드 정보를 집계하여<br>유저에게 노출해 판매를 촉진한다.        | 유저, 브랜드, 상품, 좋아요, 랭킹       | 인기 브랜드/상품 랭킹           | 집계 대상 상품 데이터 부족, 집계 중 에러 발생, 집계 전 브랜드 입점 해지, 집계 후 브랜드 입점 해지                                       |
| 11 | 시스템은 상품 판매 매출을 늘리기 위해<br>브랜드 정보를 좋아요한 유저들에게<br>해당 브랜드를 자주 노출해 판매를 촉진한다.                   | 유저, 브랜드, 상품, 좋아요, 랭킹, 노출빈도 | 인기 브랜드/상품 랭킹/타겟광고      | 집계 대상 상품 데이터 부족, 연관 유저 건수 없음, 집계 중 에러 발생, 집계 전 브랜드 입점 해지, 집계 후 브랜드 입점 해지, 집계 전 좋아요 해지, 집계 중 좋아요 해지 |
| 12 | 시스템은 유저의 구매 활성화를 위해<br>쿠폰을 발급한다.                                      | 유저, 쿠폰                           | 대량 쿠폰 발급               | 신규 쿠폰코드 중복 발생                                                                                     |
| 13 | 유저는 더 저렴하게 상품을 구매하기 위해<br>쿠폰을 사용하여 결제할 수 있다.                          | 유저, 쿠폰, 주문                           | 직접 쿠폰 발급 및 쿠폰 사용       | 쿠폰 사용가능일자 만료, 이미 사용된 쿠폰사용 시도, 발급되지 않은 쿠폰코드 입력  |


## 2. 요구사항 명세
- 유저, 포인트, 상품, 브랜드, 좋아요, 주문, 쿠폰
- 유저와 포인트는 1주차 과제로 제외합니다. / 쿠폰도 현재 과제에서는 제외합니다.

### 상품
```md
**1. 유저스토리**
- 유저는 여러 브랜드의 여러 상품을 기본/최근등록/가격/좋아요 순으로 조회할 수 있다.
- 유저는 특정 브랜드의 다양한 상품을 기본/최근등록/가격/좋아요 순으로 조회할 수 있다.
- 유저는 특정 상품의 세부 정보를 보기 위해 특정 브랜드의 특정 상품 상세 페이지를 조회할 수 있다.
- 유저는 인기 있는 상품을 찾기 위해 브랜드 상품을 좋아요 오름차순/내림차순으로 조회할 수 있다.

**2. Happy Path** 
- 비로그인 상태인 유저라도 '상품 목록 조회' 및 '특정 상품 조회'가 된다.
- 유저는 '상품 목록 조회'시 정렬 조건{기본순/최근등록순/가격순/좋아요 순}을 지정하여 조회할 수 있다.
- 유저는 특정 브랜드의 상품 목록도 조회할 수 있다.
- 유저는 특정 브랜드의 상품 목록 조회시에도 정렬조건{기본순/최근등록순/가격순/좋아요순}을 지정하여 조회할 수 있다.
- 유저는 특정 상품에 대한 '세부정보를 조회'할 수 있다. 
- 유저는 특정 브랜드에 대해서도 해당 브랜드의 상품의 좋아요를 기준으로 오름차순/내림차순 조회할 수 있다.

**3. Unhappy path**
- [예외] 품절(주문 전 재고부족)인 경우 '전체목록조회'는 되도록 한다.
- [예외] 판매중단인 경우 '전체목록조회' 대상에서 제외한다.
- [예외] 판매중단인 경우더라도 기존에 구매한 상품이라면 '세부정보 조회'가 가능하다.
- [예외] 별도의 정렬 필터가 없는 경우, 최근 등록순으로 정렬한다.

**4. FAIL PATH**
- [에러] 정렬 기준에 대한 ROWNUM 중복에 따른 페이징 처리 누락

```


### 브랜드
```md
**1. 유저스토리**
- 유저는 원하는 브랜드 또는 인기 있는 브랜드 정보를 확인하기 위해 브랜드 목록을 조회할 수 있다.

**2. Happy Path**
- 비로그인한 유저라도 브랜드 목록 조회를 할 수 있다.
- 상품 정보와 연관관계를 맺고, 브랜드별 상품정보를 조회할 수 있다.

**3. Unhappy path**
- [예외] 브랜드 입점 해지가 된 경우 목록에서 조회가 되지 않도록 한다. (Soft Delete)
- [예외] 브랜드 입점 해지가 되었더라도 기존에 주문한 상품의 브랜드 정보는 조회가 되도록 한다. (Soft Delete)

**4. FAIL PATH**
- [에러] 등록되지 않은 브랜드 정보를 조회한 경우 -> BAD REQUEST
- [에러] 이미 입점 해지된 브랜드를 또 해지하려는 경우 -> BAD REQEUEST
```

### 좋아요
```md
**1. 유저스토리**
- 유저는 상품을 둘러보고 마음에 드는 상품을 좋아요 누를 수 있다.
- 유저는 상품을 둘러보고 ‘좋아요’ 누른 상품을 ‘좋아요’ 취소할 수 있다.

**2. Happy Path**
- 로그인한 유저만이 좋아요를 누를 수 있다.

**3. Unhappy path** 
- [예외] 좋아요 했던 상품에 대한 상태가 상품 삭제됨, 상품 판매종료된 경우 
- [예외] 좋아요 했던 상품에 대한 상태가 품절이 된 경우

**4. FAIL PATH**
- [에러] 로그인 하지 않은 유저가 좋아요 하려는 경우 -> NOT AUTHORIZED 
- [에러] 이미 좋아요 누른 건을 다시 좋아요 누르는 경우 -> BAD REQUEST
- [에러] 이미 좋아요 취소한 건을 다시 좋아요 취소한 경우 -> BAD REQUEST
- [에러] 등록되지 않은 상품/판매중단된 상품에 대해 좋아요를 누르는 경우 -> BAD REQUEST

```


### 주문
```md
**1. 유저스토리**
- 유저는 자신의 관심 상품 목록을 조회하고 그 상품을 한 번에 담아 바로 주문할 수 있다.

**2. Happy Path**
- 로그인한 유저만이 상품 주문을 할 수 있다.
- 여러 상품을 하나의 주문 번호로 주문 할 수 있다.

**3. Unhappy path** 
- [예외] 여러 상품을 주문 과정 중 일부 상품 재고 관련해서 에러가 난 경우 [TODO]
- [예외] 주문 과정 중 결제가 실패한 경우 ... [TODO]

**4. FAIL PATH**
- [에러] 로그인 하지 않은 유저가 주문하려는 경우 에러를 반환한다 -> NOT AUTHORIZED 
- [에러] 품절인 상품에 대해 주문하려는 경우 주문 실패 처리한다. -> BAD REQUEST
- [에러] 주문 중 재고부족이 된 경우 주문 실패가 된다. -> 별도의 에러

- [에러] 등록되지 않은 브랜드 정보를 조회한 경우 -> BAD REQUEST
- [에러] 이미 입점 해지된 브랜드를 또 해지하려는 경우 -> BAD REQEUEST

```
