# 요구사항 명세

> 상품 목록 조회
>

```java
[유저 스토리]
- 사용자는 상품 목록을 조회할 수 있다.

[기능 흐름]
1. 모든 사용자가 조회 가능
2. 상품 목록 조회 클릭
3. 상품 목록이
	3-1. 존재하면 목록을 반환
	3-2. 존재하지 않으면 200 OK + 빈 배열을 반환
```

> 상품 상세 조회
>

```java
[유저 스토리]
- 사용자는 특정 상품의 상세 정보를 조회할 수 있다.

[기능 흐름]
1. 모든 사용자가 조회 가능
2. 특정 상품 상세 조회 클릭
3. 상세 조회하고자 하는 상품이
	3-1. 존재하면 해당 상품의 상세 정보를 반환
	3-2. 존재하지 않으면 404 NOT_FOUND 에러를 반환
```

> 브랜드 조회
>

```java
[유저 스토리]
- 사용자는 상품의 브랜드 목록을 조회할 수 있다.

[기능 흐름]
1. 모든 사용자가 조회 가능
2. 브랜드 목록 조회 클릭
3. 브랜드가 
	3-1. 존재하면 브랜드 목록을 반환
	3-2. 존재하지 않으면 200 OK + 빈 배열 반환
```

> 상품 좋아요 등록/취소 (멱등 동작)
>

```java
[유저 스토리]
- 사용자는 상품 좋아요를 등록하거나 취소할 수 있다.

[기능 흐름]
1. 로그인한 사용자만 상품 좋아요 등록/취소 가능
2. 사용자가 좋아요 상품에 대한 좋아요 등록/취소 클릭
	2.1. 좋아요 등록/취소 클릭한 사용자가
		2.1.1. 존재하지 않는 사용자이면 404 NOT_FOUND 에러 반환
		2.1.2. 존재하는 사용자라면 200 OK 반환

	2.2. 상품이 존재하는지 확인
		2.2.1. 존재하지 않는 상품이면 404 NOT_FOUND 에러 반환
		2.2.2. 존재하는 상품이면 200 OK 반환

	2.3. 해당 상품에 대해 좋아요 등록/취소를 이미 했는지 확인 
		2.3.1. 좋아요 등록/취소가 이미 이루어진 상태면 400 BAD_REQUEST 반환
		2.3.2. 좋아요 등록/취소가 최초이면 201 CREATED + 등록/취소 반영
```

> 주문 생성 및 결제 흐름 (재고 차감, 포인트 차감, 외부 시스템 연동)
>


```java
[유저 스토리]
- 사용자는 상품을 구매할 수 있다.

[기능 흐름]
1. 로그인한 사용자만 상품을 구매할 수 있다.
2. 구매하고자 하는 상품을 장바구니에 담기 클릭
	2.1. 담고자 하는 상품의 재고가 구매하려는 수량 이상 존재하는지 확인
		2.1.1. 존재하지 않으면 400 BAD_REQUEST 반환
		2.1.2. 존재하면 장바구니에 담기
3. 장바구니 내에서 최종 구매 원하는 상품 주문 클릭
	3.1. 구매 원하는 상품의 재고 여부 확인
		3.1.1. 재고가 없으면 400 BAD_REQUEST 반환
		3.1.2. 재고가 있으면 200 OK
	3.2. 주문 생성 및 결제 시스템 호출
	3.3. 결제 종류(신용카드, 체크 카드)에 따라 카드사에 잔고 확인 요청
		3.3.1. if(잔고 < 결제 금액) 이면 400 BAD_REQUEST 반환 -> 결제 실패
		3.3.2. else 이면 200 OK + 결제 성공
	3.4. 재고 차감, 포인트 차감
		
```